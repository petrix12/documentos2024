"use strict";(self.webpackChunkdocumentacion=self.webpackChunkdocumentacion||[]).push([[7189],{6359:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var s=n(4848),l=n(8453);const i={title:"Subir m\xfaltiples archivos en Laravel",sidebar_label:"Subir m\xfaltiples archivos",sidebar_position:99},a="C\xf3mo subir m\xfaltiples archivos en Laravel",o={id:"00laravel/proyectos/2021-03_multiples_file",title:"Subir m\xfaltiples archivos en Laravel",description:"+ Repositorio//github.com/petrix12/AppFileLaravel",source:"@site/docs/00laravel/proyectos/2021-03_multiples_file.md",sourceDirName:"00laravel/proyectos",slug:"/00laravel/proyectos/2021-03_multiples_file",permalink:"/documentos2024/docs/00laravel/proyectos/2021-03_multiples_file",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/00laravel/proyectos/2021-03_multiples_file.md",tags:[],version:"current",sidebarPosition:99,frontMatter:{title:"Subir m\xfaltiples archivos en Laravel",sidebar_label:"Subir m\xfaltiples archivos",sidebar_position:99},sidebar:"tutorialSidebar",previous:{title:"Plataforma de cursos",permalink:"/documentos2024/docs/00laravel/proyectos/2021-06_plataforma_cursos"},next:{title:"Sistema de Historia Cl\xednica",permalink:"/documentos2024/docs/00laravel/proyectos/2020_08_clinica"}},t={},c=[{value:"Dise\xf1o MVC b\xe1sico",id:"dise\xf1o-mvc-b\xe1sico",level:2},{value:"Notificaciones (SweetAlert)",id:"notificaciones-sweetalert",level:2},{value:"Listar archivos",id:"listar-archivos",level:2},{value:"Limitar el acceso a los archivos",id:"limitar-el-acceso-a-los-archivos",level:2},{value:"Eliminar archivo",id:"eliminar-archivo",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"c\xf3mo-subir-m\xfaltiples-archivos-en-laravel",children:"C\xf3mo subir m\xfaltiples archivos en Laravel"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Repositorio"}),": ",(0,s.jsx)(r.a,{href:"https://github.com/petrix12/AppFileLaravel",children:"https://github.com/petrix12/AppFileLaravel"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Curso"}),": ",(0,s.jsx)(r.a,{href:"https://www.udemy.com/course/como-subir-multiples-archivos-en-laravel",children:"https://www.udemy.com/course/como-subir-multiples-archivos-en-laravel"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"dise\xf1o-mvc-b\xe1sico",children:"Dise\xf1o MVC b\xe1sico"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Crear proyecto:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"laravel new file --jet\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Versi\xf3n: Laravel Framework 8.29.0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Ejecutar:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"npm install\r\nnpm run dev\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Crear modelo ",(0,s.jsx)(r.strong,{children:"File"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"php artisan make:model File -m\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Crear controlador:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"php artisan make:controller FileController -r\n"})}),"\n",(0,s.jsx)(r.admonition,{title:"Nota",type:"tip",children:(0,s.jsxs)(r.p,{children:["Solamente trabajaremos con los m\xe9todos ",(0,s.jsx)(r.strong,{children:"index"}),", ",(0,s.jsx)(r.strong,{children:"create"})," y ",(0,s.jsx)(r.strong,{children:"store"})," del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),"."]})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Agregar campos ",(0,s.jsx)(r.strong,{children:"name"}),", ",(0,s.jsx)(r.strong,{children:"code_name"})," y ",(0,s.jsx)(r.strong,{children:"user_id"})," a la migraci\xf3n de la tabla ",(0,s.jsx)(r.strong,{children:"files"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"public function up()\r\n{\r\n    Schema::create('files', function (Blueprint $table) {\r\n        $table->id();\r\n        $table->string('name'); // Nombre del archivo\r\n        $table->text('code_name'); // Nombre del archivo encriptado\r\n        $table->unsignedBigInteger('user_id');   // Relaci\xf3n con los usuarios\r\n        $table->foreign('user_id')\r\n            ->references('id')\r\n            ->on('users')\r\n            ->onDelete('cascade');\r\n        $table->timestamps();\r\n    });\r\n}\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Indicamos los campos de asignaci\xf3n masiva en el modelo ",(0,s.jsx)(r.strong,{children:"File"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"protected $fillable = [\r\n    'name',\r\n    'code_name',\r\n    'user_id'\r\n];\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Configurar el archivo de variable de entorno ",(0,s.jsx)(r.strong,{children:".env"})," con una bd."]}),"\n",(0,s.jsxs)(r.li,{children:["Ejecutar migraci\xf3n:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"php artisan migrate\n"})}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"Adecuamos la vista dashboard a nuestro proyecto."}),"\n",(0,s.jsxs)(r.li,{children:["Agregamos la ruta en ",(0,s.jsx)(r.strong,{children:"routes\\web.php"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'title="routes\\web.php"',children:"Route::post('/upload', [FilesController::class, 'store'])->name('user.files.store');\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Programar el m\xe9todo store del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["Crear enlace simb\xf3lico de public a storage:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"php artisan storage:link\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"notificaciones-sweetalert",children:"Notificaciones (SweetAlert)"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["URL: ",(0,s.jsx)(r.a,{href:"https://github.com/realrashid/sweet-alert",children:"https://github.com/realrashid/sweet-alert"})]}),"\n"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Ejecutar:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"composer require realrashid/sweet-alert\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Agregar a ",(0,s.jsx)(r.strong,{children:"config\\app.php"})," en providers","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'title="config\\app.php"',children:"'providers' => [\r\n    /*\r\n    * Package Service Providers...\r\n    */\r\n    RealRashid\\SweetAlert\\SweetAlertServiceProvider::class,\r\n    // ...\r\n],\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Agregar a ",(0,s.jsx)(r.strong,{children:"config\\app.php"})," en aliases","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'title="config\\app.php"',children:"'Alert' => RealRashid\\SweetAlert\\Facades\\Alert::class,\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Agregar a la cabecera del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"use RealRashid\\SweetAlert\\Facades\\Alert;\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Insertar en la secci\xf3n content de ",(0,s.jsx)(r.strong,{children:"resources\\views\\layouts\\app.blade.php"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"@include('sweetalert::alert', ['cdn' => \"https://cdn.jsdelivr.net/npm/sweetalert2@9\"])\n"})}),"\n","::: tip Nota\r\nSi falla, reemplazar por:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"@include('sweetalert::alert')\n"})}),"\n",":::"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"listar-archivos",children:"Listar archivos"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Crear otro men\xfa de navegaci\xf3n en resources\\views\\navigation-menu.blade.php","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-html",children:"<div class=\"hidden space-x-8 sm:-my-px sm:ml-10 sm:flex\">\r\n    <x-jet-nav-link href=\"{{ route('user.files.index') }}\" :active=\"request()->routeIs('user.files.index')\">\r\n        {{ __('Mis archivos') }}\r\n    </x-jet-nav-link>\r\n</div>\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Agregar ruta en ",(0,s.jsx)(r.strong,{children:"routes\\web.php"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'title="routes\\web.php"',children:"Route::get('/files', [Controller::class, 'index'])->name('user.files.index');\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Crear vista para el m\xe9todo ",(0,s.jsx)(r.strong,{children:"index"})," del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),":","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"resources\\views\\index.blade.php"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Programar el m\xe9todo ",(0,s.jsx)(r.strong,{children:"index"})," del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["Seleccionar un modelo de tabla de bootstrap y para el dise\xf1o del la vista index.","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["URL: ",(0,s.jsx)(r.a,{href:"https://getbootstrap.com/",children:"https://getbootstrap.com/"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Insertar CDN de estilos Bootstrap en resources\\views\\layouts\\app.blade.php","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-html",children:'\x3c!-- CSS only --\x3e\r\n<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"limitar-el-acceso-a-los-archivos",children:"Limitar el acceso a los archivos"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Agregar ruta a ",(0,s.jsx)(r.strong,{children:"routes\\web.php"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'tilte="routes\\web.php"',children:"Route::get('/files/{file}', [FilesController::class, 'store'])->name('user.files.show');\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Programar el m\xe9todo ",(0,s.jsx)(r.strong,{children:"show"})," del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),".","\n",(0,s.jsxs)(r.admonition,{title:"OJO",type:"warning",children:[(0,s.jsx)(r.p,{children:"Solventar problema:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Forbidden"}),"\n",(0,s.jsx)(r.li,{children:"You don't have permission to access this resource."}),"\n",(0,s.jsx)(r.li,{children:"Apache/2.4.46 (Win64) OpenSSL/1.1.1h PHP/7.4.15 Server at file.test Port 80"}),"\n"]})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"eliminar-archivo",children:"Eliminar archivo"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Agregar ruta a ",(0,s.jsx)(r.strong,{children:"routes\\web.php"}),":","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",metastring:'tilte="routes\\web.php"',children:"Route::delete('/delet-file/{file}', [FilesController::class, 'destroy'])->name('user.files.destroy');\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Programar el m\xe9todo ",(0,s.jsx)(r.strong,{children:"destroy"})," del controlador ",(0,s.jsx)(r.strong,{children:"FileController"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var s=n(6540);const l={},i=s.createContext(l);function a(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);